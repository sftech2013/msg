!function(a){var b={key:null,endpoint:"oembed",secure:null,query:{},method:"replace",addImageStyles:!0,wrapElement:"div",className:"embed",batch:20,urlRe:null},c=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,d=function(a){return null===a||void 0===a},e=function(b,c){var d=[],e=[];return a.each(b,function(a,b){e.push(b),e.length===c&&(d.push(e),e=[])}),0!==e.length&&d.push(e),d},f=function(b){return d(b)?[]:a.isArray(b)?b:[b]},g=function(b){return a.map(b[0],function(c,d){return[a.map(b,function(a){return a[d]})]})},h=function(a,b,c){this.init(a,b,c)};h.prototype={init:function(b){this.urls=b,this.count=0,this.results={},this._deferred=a.Deferred()},notify:function(b){if(this.results[b.original_url]=b,this.count++,this._deferred.notify.apply(this._deferred,[b]),this.count===this.urls.length){var c=this,d=a.map(this.urls,function(a){return c.results[a]});this._deferred.resolve(d)}return this},state:function(){return this._deferred.state.apply(this._deferred,arguments)}},window.Keeper=h;var i=function(){};i.prototype={defaults:{},log:function(a,b){d(window.console)||d(window.console[a])||window.console[a].apply(window.console,[b])},build:function(b,c,e){e=d(e)?{}:e;var f=e.secure;d(f)&&(f="https:"===window.location.protocol?!0:!1);var g=(f?"https":"http")+"://api.embed.ly/"+("objectify"===b?"2/":"1/")+b,h=d(e.query)?{}:e.query;return h.key=e.key,g+="?"+a.param(h),g+="&urls="+a.map(c,encodeURIComponent).join(",")},ajax:function(i,j,k){if(k=a.extend({},b,a.embedly.defaults,"object"==typeof k&&k),d(k.key))return this.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),null;j=f(j);var l,m=new h(j),n=[],o=[];a.each(j,function(a,b){l=!1,c.test(b)&&(l=!0,null!==k.urlRe&&k.urlRe.test&&!k.urlRe.test(b)&&(l=!1)),l===!0?n.push(b):o.push({url:b,original_url:b,error:!0,invalid:!0,type:"error",error_message:'Invalid URL "'+b+'"'})});var p=e(n,k.batch),q=this;return a.each(p,function(b,c){a.ajax({url:q.build(i,c,k),dataType:"jsonp",success:function(b){a.each(g([c,b]),function(a,b){var c=b[1];c.original_url=b[0],c.invalid=!1,m.notify(c)})}})}),o.length&&setTimeout(function(){a.each(o,function(a,b){m.notify(b)})},1),m._deferred},oembed:function(a,b){return this.ajax("oembed",a,b)},preview:function(a,b){return this.ajax("preview",a,b)},objectify:function(a,b){return this.ajax("objectify",a,b)},extract:function(a,b){return this.ajax("extract",a,b)}};var j=function(){};j.prototype={build:function(b,c,e){e=a.extend({},a.embedly.defaults,"object"==typeof e&&e);var f=e.secure;d(f)&&(f="https:"===window.location.protocol?!0:!1);var g=(f?"https":"http")+"://i.embed.ly/"+("display"===b?"1/":"1/display/")+b,h=d(e.query)?{}:e.query;return h.key=e.key,g+="?"+a.param(h),g+="&url="+encodeURIComponent(c)},display:function(a,b){return this.build("display",a,b)},resize:function(a,b){return this.build("resize",a,b)},fill:function(a,b){return this.build("fill",a,b)},crop:function(a,b){return this.build("crop",a,b)}};var k=function(a,b,c){this.init(a,b,c)};k.prototype={init:function(b,c,d){this.elem=b,this.$elem=a(b),this.original_url=c,this.options=d,this.loaded=a.Deferred();var e=this;this.loaded.done(function(){e.$elem.trigger("loaded",[e])}),this.$elem.trigger("initialized",[this])},progress:function(b){a.extend(this,b),this.options.display?this.options.display.apply(this.elem,[this,this.elem]):"oembed"===this.options.endpoint&&this.display(),this.loaded.resolve(this)},imageStyle:function(){var a,b=[];return this.options.addImageStyles&&(this.options.query.maxwidth&&(a=isNaN(parseInt(this.options.query.maxwidth,10))?"":"px",b.push("max-width: "+this.options.query.maxwidth+a)),this.options.query.maxheight&&(a=isNaN(parseInt(this.options.query.maxheight,10))?"":"px",b.push("max-height: "+this.options.query.maxheight+a))),b.join(";")},display:function(){if("error"===this.type)return!1;this.style=this.imageStyle();var a;"photo"===this.type?(a="<a href='"+this.original_url+"' target='_blank'>",a+="<img style='"+this.style+"' src='"+this.url+"' alt='"+this.title+"' /></a>"):"video"===this.type||"rich"===this.type?a=this.html:(this.title=this.title||this.url,a=this.thumbnail_url?"<img src='"+this.thumbnail_url+"' class='thumb' style='"+this.style+"'/>":"",a+="<a href='"+this.original_url+"'>"+this.title+"</a>",a+=this.provider_name?"<a href='"+this.provider_url+"' class='provider'>"+this.provider_name+"</a>":"",a+=this.description?'<div class="description">'+this.description+"</div>":""),this.options.wrapElement&&(a="<"+this.options.wrapElement+' class="'+this.options.className+'">'+a+"</"+this.options.wrapElement+">"),this.code=a,"replace"===this.options.method?this.$elem.replaceWith(this.code):"after"===this.options.method?this.$elem.after(this.code):"afterParent"===this.options.method?this.$elem.parent().after(this.code):"replaceParent"===this.options.method&&this.$elem.parent().replaceWith(this.code),this.$elem.trigger("displayed",[this])}},a.embedly=new i,a.embedly.display=new j,a.fn.embedly=function(c){if(void 0===c||"object"==typeof c){if(c=a.extend({},b,a.embedly.defaults,"object"==typeof c&&c),d(c.key))return a.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),this.each(a.noop);var e={},f=function(b){if(!a.data(a(b),"embedly")){var d=a(b).attr("href"),f=new k(b,d,c);a.data(b,"embedly",f),e.hasOwnProperty(d)?e[d].push(f):e[d]=[f]}},g=this.each(function(){d(a(this).attr("href"))?a(this).find("a").each(function(){d(a(this).attr("href"))||f(this)}):f(this)}),h=a.embedly.ajax(c.endpoint,a.map(e,function(a,b){return b}),c).progress(function(b){a.each(e[b.original_url],function(a,c){c.progress(b)})});return c.progress&&h.progress(c.progress),c.done&&h.done(c.done),g}},a.expr[":"].embedly=function(b){return!d(a(b).data("embedly"))},a.fn.display=function(c,e){if(d(c)&&(c="display"),void 0===e||"object"==typeof e){if(e=a.extend({},b,a.embedly.defaults,"object"==typeof e&&e),d(e.key))return a.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly/display"),this.each(a.noop);var f=function(b){var d=a(b);if(!d.data("display")){var f=d.data("src")||d.attr("href"),g={original_url:f,url:a.embedly.display.build(c,f,e)};d.data("display",g),d.trigger("initialized",[b]);var h="<img src='"+g.url+"' />";d.is("a")?d.append(h):d.replaceWith(h)}},g=function(b){return d(a(b).data("src"))&&d(a(b).attr("href"))?!1:!0},h=this.each(function(){g(this)?f(this):a(this).find("img,a").each(function(){g(this)&&f(this)})});return h}},a.expr[":"].display=function(b){return!d(a(b).data("display"))}}(jQuery,window);